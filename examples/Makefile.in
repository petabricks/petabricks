
BINS=$(basename $(wildcard *.pbcc */*.pbcc */*/*.pbcc))
CPPS=$(addsuffix .cpp, $(OUTPUTS))
CFGS=$(addsuffix .cfg, $(OUTPUTS))


all: $(BINS)

%: %.pbcc ../src/pbc
	@(../src/pbc $< 2>/dev/null >&2 && echo PASSED: $*) || echo FAILED: $*

clean:
	rm -f $(BINS) $(CPPS) *.o

ignore:
	echo $(BINS) '*.cpp *.cfg' | xargs -n 1 echo > .gitignore

pbc:; (cd .. && make)
